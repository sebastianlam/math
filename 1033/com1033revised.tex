\documentclass[12pt,a4paper]{article}
\usepackage{amsmath,amssymb,hyperref,tikz,listings,xcolor,geometry,fancyhdr,mathtools,tcolorbox}
\usetikzlibrary{automata,positioning,arrows,shapes,decorations,backgrounds}

% Enhanced page layout
\geometry{margin=2cm}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\leftmark}
\fancyhead[R]{\thepage}
\renewcommand{\headrulewidth}{0.4pt}

% Enhanced colors and styles
\definecolor{deepblue}{RGB}{0,0,150}
\definecolor{deepred}{RGB}{150,0,0}
\definecolor{deepgreen}{RGB}{0,150,0}
\definecolor{lightgray}{RGB}{240,240,240}

\lstset{
  frame=single,
  language=Java,
  backgroundcolor=\color{lightgray},
  basicstyle={\small\ttfamily},
  keywordstyle=\color{deepblue}\bfseries,
  commentstyle=\color{deepgreen}\itshape,
  stringstyle=\color{deepred},
  breaklines=true,
  tabsize=2,
  numbers=left,
  numberstyle=\tiny\color{gray},
  numbersep=5pt
}

% Custom theorem-like environments
\newtheorem{theorem}{Theorem}[section]
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}

% Custom tcolorbox styles
\tcbuselibrary{skins,breakable}
\newtcolorbox{info-box}{
  enhanced,
  breakable,
  colback=blue!5!white,
  colframe=blue!75!black,
  title=Explanation
}

\begin{document}

\title{\textbf{Advanced Mathematical Reference}}
\author{Compiled by Claude}
\date{\today}

\maketitle
\tableofcontents

\section{Vectors}
\begin{info-box}
Vectors are fundamental objects in linear algebra, representing quantities with both magnitude and direction.
\end{info-box}

\subsection{Vector Definition}
$\mathbb{R}^n = \{ (x_1, \ldots, x_n) \mid x_i \in \mathbb{R} \}$

\subsubsection{Null Vector}
$\vec{0} = (0, 0, \ldots, 0)$

\subsection{Vector Operations}

\subsubsection{Addition}
$(a_1, \ldots, a_n) + (b_1, \ldots, b_n) = (a_1 + b_1, \ldots, a_n + b_n)$

\subsubsection{Scalar Multiplication}
$\lambda(a_1, \ldots, a_n) = (\lambda a_1, \ldots, \lambda a_n)$

\subsubsection{Dot Product}
$\vec{a} \cdot \vec{b} = \sum_{i=1}^n a_i b_i$

\section{Linear Dependence / Independence}
\begin{info-box}
Linear dependence and independence are crucial concepts in understanding the relationships between vectors.
\end{info-box}

\subsection{Linear Combination}
$\vec{w} = \sum_{i=1}^n \lambda_i \vec{v_i}$

\subsection{Linear Dependence}
Vectors are linearly dependent if $\vec{0} = \sum_{i=1}^n \lambda_i \vec{v_i}$, with at least one $\lambda_i \neq 0$

\section{Matrices}
\begin{info-box}
Matrices are rectangular arrays of numbers used to represent linear transformations and solve systems of linear equations.
\end{info-box}

\subsection{Matrix Multiplication}
$(AB)_{ij} = \sum_{k=1}^n a_{ik} b_{kj}$

\subsection{Determinant}
For 3x3 matrix:
\[
\det(A) = 
\begin{vmatrix}
a_{11} & a_{12} & a_{13} \\
a_{21} & a_{22} & a_{23} \\
a_{31} & a_{32} & a_{33}
\end{vmatrix}
= a_{11}(a_{22}a_{33} - a_{23}a_{32}) - a_{12}(a_{21}a_{33} - a_{23}a_{31}) + a_{13}(a_{21}a_{32} - a_{22}a_{31})
\]

\subsection{Properties of Determinants}
\begin{enumerate}
\item $\det(AB) = \det(A)\det(B)$
\item Row/column swap changes sign of determinant
\item $\det(A) = 0$ if A has a row/column of zeros or two identical rows/columns
\end{enumerate}

\section{Linear Equations}
\begin{info-box}
Linear equations form the backbone of many mathematical models in science and engineering.
\end{info-box}

Ax = b

\subsection{Cramer's Rule}
For a system Ax = b, $x_i = \frac{\det(A_i)}{\det(A)}$, where $A_i$ is A with i-th column replaced by b

\section{Vector Spaces}
\begin{info-box}
Vector spaces are abstract mathematical structures that generalize the properties of vectors in Euclidean space.
\end{info-box}

A set V with vector addition and scalar multiplication satisfying:
\begin{enumerate}
\item Commutativity and associativity of addition
\item Existence of zero vector and additive inverses
\item Distributivity of scalar multiplication over vector and field addition
\item Associativity of scalar multiplication
\item Existence of multiplicative identity for scalars
\end{enumerate}

\section{Linear Transformations}
\begin{info-box}
Linear transformations are functions between vector spaces that preserve vector addition and scalar multiplication.
\end{info-box}

A function T: V â†’ W between vector spaces satisfying:
\begin{enumerate}
\item T(u + v) = T(u) + T(v)
\item T($\alpha$v) = $\alpha$T(v)
\end{enumerate}

\section{Multi-variate Calculus}
\begin{info-box}
Multi-variate calculus extends the concepts of single-variable calculus to functions of several variables.
\end{info-box}

\subsection{Limits and Continuity}
Similar to single-variable calculus, but with multiple variables

\subsection{Partial Derivatives}
$\frac{\partial f}{\partial x_i} = \lim_{h \to 0} \frac{f(x_1,\ldots,x_i+h,\ldots,x_n) - f(x_1,\ldots,x_n)}{h}$

\subsection{Gradient}
$\nabla f = \left(\frac{\partial f}{\partial x_1}, \ldots, \frac{\partial f}{\partial x_n}\right)$

\subsection{Directional Derivative}
$D_\mathbf{u}f = \nabla f \cdot \mathbf{u}$

\subsection{Chain Rule}
$\frac{d}{dt}f(x(t),y(t)) = \frac{\partial f}{\partial x}\frac{dx}{dt} + \frac{\partial f}{\partial y}\frac{dy}{dt}$

\subsection{Multiple Integrals}
$\int\int_D f(x,y) \,dA = \int_a^b\int_{g_1(x)}^{g_2(x)} f(x,y) \,dy\,dx$

\end{document}